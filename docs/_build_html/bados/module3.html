

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. Stress-Based and Behavioral DoS Profile Settings &mdash; Introduction to ASM/AWAF Behavioral DoS 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. Request Signatures" href="module4.html" />
    <link rel="prev" title="3. Application Security DoS Profiles" href="module2.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Introduction to ASM/AWAF Behavioral DoS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="module1.html">2. Base Configuration and Traffic Baseline</a></li>
<li class="toctree-l1"><a class="reference internal" href="module2.html">3. Application Security DoS Profiles</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Stress-Based and Behavioral DoS Profile Settings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#review-stress-based-dos-profile-settings">4.1. Review Stress-Based Dos Profile Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#review-behavioral-dos-settings">4.2. Review Behavioral DoS Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#summarizing-key-points">4.3. Summarizing Key Points</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="module4.html">5. Request Signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="module5.html">6. Bad Actor Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="module6.html">7. Bad Actor Detection and Request Signatures</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Introduction to ASM/AWAF Behavioral DoS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>4. Stress-Based and Behavioral DoS Profile Settings</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/bados/module3.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="stress-based-and-behavioral-dos-profile-settings">
<span id="module3"></span><h1>4. Stress-Based and Behavioral DoS Profile Settings<a class="headerlink" href="#stress-based-and-behavioral-dos-profile-settings" title="Permalink to this headline">¶</a></h1>
<p>In this module, we will review the various settings for configuring Stress-based and Behavioral DoS protections in more detail.  We will not review each and every setting, leaving that exercise up to the reader, but instead will focus on key settings which will most likely require attention during a production deployment.  More detail on each individual setting can be found by viewing the <strong>Help</strong> on left side of the BIG-IP Configuration Utility (GUI).</p>
<div class="section" id="review-stress-based-dos-profile-settings">
<h2>4.1. Review Stress-Based Dos Profile Settings<a class="headerlink" href="#review-stress-based-dos-profile-settings" title="Permalink to this headline">¶</a></h2>
<p>To appreciate the powerful nature of Advanced Web Application Firewall’s Behavioral DoS feature, it first makes sense to analyze one of the other L7 DoS protection mechanisms.  For this exercise, we will examine the options and behaviors of the Stress-based DoS protections available in an Application Security DoS profile.</p>
<p><a class="reference internal" href="../_images/stressbased.png"><img alt="stressbased" src="../_images/stressbased.png" style="width: 6.59740in; height: 5.53203in;" /></a></p>
<ol class="arabic">
<li><p class="first"><strong>Operation Mode</strong>
Defines the operational mode for the stress-based dos protection feature.  Available options include: Blocking, Transparent, Off.  Blocking means feature will detect, report, and mitigate.  Transparent means feature will detect, report, but will not mitigate.  Off means the feature is disabled.</p>
</li>
<li><p class="first"><strong>Threshold Mode</strong>
Defines how Advanced Web Application Firewall derives thresholds to be used in detecting the TPS component of a stress-based attack.  Options include:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Manual</strong>: Administrator explicity configures TPS and percentage thresholds based on their knowledge of the environment or specific requirements.</li>
<li><strong>Automatic</strong>: Advanced Web Application Firewall monitors traffic rates automatically and calculates the thresholds based on normal traffic volume to the application.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Stress-based Detection Options</strong>
Advanced Web Application Firewall can trigger an attack if any/all of the following detection methods exceed the thresholds defined or calculated for the detection method:</p>
<blockquote>
<div><ul class="simple">
<li><strong>By Source IP</strong>: A specific source IP has exceeded the thresholds defined in the detection thresholds.</li>
<li><strong>By Device ID</strong>: A specific device has exceeded the thresholds defined in the detection thresholds.  Device ID is ASM calculating a fingerprint for a given device.  The feature requires Javascript injection to proper operation.  However, offers benefit of detecting a specific device even if the attack varies its source IP address.</li>
<li><strong>By Geolocation</strong>: A country/geolocation has exceeded the thresholds defined in the detection thresholds.</li>
<li><strong>By URL</strong>: Request traffic to a specific (or set of URL’s identified in URL patterns section of the DoS Profile General Properties) has exceeded the thresholds defined in the detection thresholds.</li>
<li><strong>Site Wide</strong>: Request traffic to the entire web site has exceeded the thresholds defined in the detection thresholds, <strong>and</strong> an attack has not been detected using any of the other detection criteria.  Site-wide is considered last resort.</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is important to understand that while stress-based protections are monitoring server latency, and tracking application request volume in short and long term intervals, the detection methods listed above are the only ways to identify when an attack is on-going.  This, as you will see, is quite a bit different than they way Advanced Web Application Firewall Behavioral DoS feature identifies attacks and attackers!</p>
</div>
</li>
</ol>
</div>
<div class="section" id="review-behavioral-dos-settings">
<h2>4.2. Review Behavioral DoS Settings<a class="headerlink" href="#review-behavioral-dos-settings" title="Permalink to this headline">¶</a></h2>
<p>Having reviewed the options for configuring Stress-based dos mitigation, now let’s examine the options required for configuring Advanced Web Application Firewall’s Behavioral DOS mitigations.</p>
<p><a class="reference internal" href="../_images/bados.png"><img alt="bados" src="../_images/bados.png" style="width: 6.59740in; height: 3.33203in;" /></a></p>
<ol class="arabic">
<li><p class="first"><strong>Bad Actors Behavior Detection</strong>
Determines whether Behavioral DoS engine tracks and attempts to identify the bad actors contributing to a given set of malicious traffic.  When Bad Actor Behavior Detection is enabled, once Advanced Web Application Firewall detects server stress  and identifies a set of malicious traffic contributing to the server stress, the Behavioral DoS engine then attempts to identify what source IP addresses are generating the malicious traffic, and what percentage of malicious traffic a given bad actor is contributing.  Bad actors, are mitigated at transport layer via slowdown mitigation techniques, and the rate at which they are mitigated is directly related to their percentage of contribution to the malicious traffic set, and the migitation mode selected.</p>
</li>
<li><p class="first"><strong>Request Signature Detection</strong>
Determines wheither Behavioral DoS engine will attempt to generate a traffic signature to block anamolous traffic.  Advanced Web Application Firewall Behavioral DoS feature is in a permanent learning state, always tracking application requests, and the construction of these requests, and then comparing to an evolving baseline.  When Request Signatures Detection is enabled, once Advanced Web Application Firewall detects server stress, it looks to identify traffic characteristics which have deviated from the baseline.  If there are deviating characteristics, the Behavioral DoS engine, then dynamically generates a signature based on these deviating characteristics to block anamolous traffic.</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In addition to generating signatures, the Behavioral DoS Engine, also continually evaluates the signature for efficacy, minimizing risk of signature becoming false positive and blocking known good traffic.</p>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Use Approved Signatures Only</strong>
By default, when Request Signatures Detection is enabled, Advanced Web Application Firewall will generate and use dynamically generated attack signatures as defined by the mitigation mode selection.  By enabling this option, the administrator overrides this behavior, and forces a manual step to review and approve the signature prior to any mitigations taking effect.  Signatures can be reviewed from Advanced Web Application Firewall GUI via <strong>Security</strong> -&gt; <strong>DoS Protection</strong> -&gt; <strong>Signatures</strong></p>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Add screenshot of request signature approval option</p>
</div>
</li>
<li><p class="first"><strong>Mitigation</strong>
Defines the mitigation mode for Advanced Web Application Firewall Behavioral DoS.  Options include:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt><strong>No Mitigation</strong>:</dt>
<dd><ul class="first last">
<li>Monitors traffic, generates signatures, and identifies bad actors, but does not perform any mitigation.</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>..TODO:: verify bad actors generated</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><strong>Conservative Protection</strong>:</dt>
<dd><ul class="first last">
<li><strong>If</strong> Bad Actors Behavior Detection is enabled, slows down bad identified bad actors.</li>
<li><strong>If</strong> Request Signatures Detection is enabled, blocks requests that match attack signatures</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Standard Protection</strong>:</dt>
<dd><ul class="first last">
<li><strong>If</strong> Bad Actors Behavior Detection is enabled, slows down bad identified bad actors.</li>
<li><strong>If</strong> Request Signatures Detection is enabled, blocks requests that match attack signatures</li>
<li>Rate limits all requests based on server health</li>
<li>Limits the number of concurrent connections from bad actor IP addresses</li>
<li>If necessary, limits the number of all concurrent connections based on server health</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Aggressive Protection</strong>:</dt>
<dd><ul class="first last">
<li><strong>If</strong> Bad Actors Behavior Detection is enabled, slows down bad identified bad actors.</li>
<li><strong>If</strong> Request Signatures Detection is enabled, blocks requests that match attack signatures</li>
<li>Rate limits all requests based on server health</li>
<li>Limits the number of concurrent connections from bad actor IP addresses</li>
<li>If necessary, limits the number of all concurrent connections based on server health</li>
<li><strong>Proactively</strong> performs all protection actions, even before attack detection, increasing impact of protection techniques.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Advanced Web Application Firewall mitigates DoS with the most effective and efficient method available, and as quickly as possible to restore server health.  Meaning, the mitigation method will often change over time as more data is learned and analyzed.  For example, at the onset of an attack, Advanced Web Application Firewall may apply global rate limiting in an attempt to mitigate an onslaught of traffic.  Then, as the signature engine has observed enough traffic to identify malicious traffic and generate a signature, the Behavioral DoS engine will begin mitigating with request signatures and discontinue global rate limiting.  Finally, as bad actors are identified, traffic from those sources is mitigated using layer four slowdown mechanisms, and request signatures are only used for traffic matching the signature and not in the bad actor list.  This approach allows Advanced Web Application Firewall to perform better under attack, and mimimizes the risk of blocking good traffic while mitigating DoS.</p>
</li>
</ol>
</div>
<div class="section" id="summarizing-key-points">
<h2>4.3. Summarizing Key Points<a class="headerlink" href="#summarizing-key-points" title="Permalink to this headline">¶</a></h2>
<p>After reviewing several options for both Stress-based and Behavioral DoS features, the goal of this section is to call out some key points which might be overlooked reviewing configuration options:</p>
<blockquote>
<div><ul class="simple">
<li>All DoS features are complementary to Advanced Web Application Firewall web application firewall (WAF) and bot protection features.  DoS features mitigate traffic that exceed a certain rate, or induce server-side stress.  This traffic is, many times, is completely legitimate traffic which will not trigger a WAF block.</li>
<li>Heavy URL, TPS-based DoS, Stress-based DoS, and Behavioral DoS features can all be configured concurrently, complementing one another, or separate and independent of one another.</li>
<li>Both Stress-based and Behavioral DoS protection features continually monitor application server performance for signs of server stress.  Both features will consider server stress as a key component in detecting an attack, and neither will trigger a mitigation if the server is perceived to be healthy.</li>
<li>Stress-based and TPS based DoS features can detect DoS attacks across a pre-defined set of detection criteria (source IP, URL, device ID, geolocation, site).  Behavioral DoS is not constrained to a pre-defined set of detection criteria.  Behavioral DoS is self adjusting dynamic DoS defense system which can detect DoS across hundreds of traffic predicates.  As a result, Behavioral DoS, which is much more affective in mitigating multi-vector layer seven DoS attacks which mutate over time.  Conversly, TPS and/or Stress-based DoS features are much better at defining specific rate limits for traffic entering your application.</li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="module4.html" class="btn btn-neutral float-right" title="5. Request Signatures" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="module2.html" class="btn btn-neutral" title="3. Application Security DoS Profiles" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Michael Everett.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>